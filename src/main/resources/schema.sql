CREATE TABLE IF NOT EXISTS MPA (
	MPA_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	NAME CHARACTER VARYING(128)
);

INSERT INTO MPA (MPA_ID, NAME) VALUES (1,'G');
INSERT INTO MPA (MPA_ID, NAME) VALUES (2,'PG');
INSERT INTO MPA (MPA_ID, NAME) VALUES (3,'PG-13');
INSERT INTO MPA (MPA_ID, NAME) VALUES (4,'R');
INSERT INTO MPA (MPA_ID, NAME) VALUES (5,'NC-17');


CREATE TABLE IF NOT EXISTS FILM (
	FILM_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	NAME CHARACTER VARYING(128) NOT NULL,
	RELEASE_DATE DATE,
	DESCRIPTION CHARACTER VARYING(300),
	DURATION INTEGER,
	MPA_ID BIGINT REFERENCES MPA (MPA_ID)
);

CREATE TABLE IF NOT EXISTS GENRE (
	GENRE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	NAME CHARACTER VARYING(128)
);

INSERT INTO GENRE (GENRE_ID, NAME) VALUES (1,'Комедия');
INSERT INTO GENRE (GENRE_ID, NAME) VALUES (2,'Драма');
INSERT INTO GENRE (GENRE_ID, NAME) VALUES (3,'Мультфильм');
INSERT INTO GENRE (GENRE_ID, NAME) VALUES (4,'Триллер');
INSERT INTO GENRE (GENRE_ID, NAME) VALUES (5,'Документальный');
INSERT INTO GENRE (GENRE_ID, NAME) VALUES (6,'Боевик');

CREATE TABLE IF NOT EXISTS FILM_GENRE (
	FILM_GENRE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	FILM_ID BIGINT REFERENCES FILM (FILM_ID),
	GENRE_ID BIGINT REFERENCES GENRE (GENRE_ID)
);

CREATE TABLE IF NOT EXISTS "USER" (
	USER_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	EMAIL CHARACTER VARYING(320) NOT NULL,
	LOGIN CHARACTER VARYING(64) NOT NULL,
	NAME CHARACTER VARYING(128),
	BIRTHDAY DATE
);

CREATE TABLE IF NOT EXISTS FRIENDSHIP (
	SENDER_ID BIGINT  REFERENCES "USER" (USER_ID),
	RECIPIENT_ID BIGINT  REFERENCES "USER" (USER_ID),
	PRIMARY KEY (SENDER_ID, RECIPIENT_ID)
);

CREATE TABLE IF NOT EXISTS FILM_LIKE (
	FILM_LIKE_ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	USER_ID BIGINT  REFERENCES "USER" (USER_ID),
	FILM_ID BIGINT REFERENCES FILM (FILM_ID)
);